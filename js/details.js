function renderRecipe(e){document.title=`${e.recipeName} | SpiceScript`;document.querySelector(".recipe-header").innerHTML=`\n        <h1>${e.recipeName}</h1>\n        <div class="featured-image">\n            <img src="${e.imagePath||"/images/default-recipe.jpg"}" alt="${e.recipeName}">\n        </div>\n    `;const t=document.querySelector(".recipe-content"),n=e.ingredients.split("\n").filter((e=>e.trim())).map((e=>`<li>${e.trim()}</li>`)).join(""),i=e.directions.split("\n").filter((e=>e.trim())).map(((e,t)=>`\n            <div class="step">\n                <div class="step-text">\n                    <h3>Step ${t+1}</h3>\n                    <p>${e.trim()}</p>\n                </div>\n            </div>\n        `)).join("");t.innerHTML=`\n        <div class="intro">\n            <p>${e.description}</p>\n            <p class="recipe-meta">\n                <strong>By:</strong> ${e.authorName||"Anonymous"}<br>\n                <strong>Created:</strong> ${new Date(e.createdAt).toLocaleDateString()}\n            </p>\n        </div>\n\n        <div class="ingredients">\n            <h2>Ingredients</h2>\n            <ul>\n                ${n}\n            </ul>\n        </div>\n\n        <div class="instructions">\n            <h2>Directions</h2>\n            ${i}\n        </div>\n    `,checkAuthAndShowEditButton(e)}async function checkAuthAndShowEditButton(e){try{const t=await fetch("/api/auth/me",{credentials:"include"});if(t.ok){const n=await t.json();if(n.success&&n.data.user){if(n.data.user.id===e.authorId){const t=document.querySelector(".EditButton-container");t.innerHTML=`\n                        <button onclick="editRecipe(${e.id})">Edit</button>\n                        <button onclick="deleteRecipe(${e.id})" class="delete-btn">Delete</button>\n                    `,t.classList.remove("hidden")}}}}catch(e){console.error("Error checking auth:",e)}}function editRecipe(e){window.location.href=`/entry_form?id=${e}`}async function deleteRecipe(e){if(confirm("Are you sure you want to delete this recipe?"))try{const t=await fetch(`/api/recipes/${e}`,{method:"DELETE",credentials:"include"}),n=await t.json();if(t.ok&&n.success)alert("Recipe deleted successfully!"),window.location.href="/catalog";else{const e=n.error?.message||"Failed to delete recipe.";alert(e)}}catch(e){console.error("Delete recipe error:",e),alert("Network error. Please try again.")}}document.addEventListener("DOMContentLoaded",(async()=>{const e=new URLSearchParams(window.location.search).get("id");if(!e)return alert("No recipe specified!"),void(window.location.href="/catalog");try{const t=await fetch(`/api/recipes/${e}`,{credentials:"include"});if(!t.ok)throw new Error("Recipe not found");const n=await t.json();if(!n.success||!n.data.recipe)throw new Error("Recipe not found");renderRecipe(n.data.recipe)}catch(e){console.error("Error fetching recipe:",e),alert("Failed to load recipe. Redirecting to catalog..."),window.location.href="/catalog"}}));